(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[281],{8836:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/wifi",function(){return s(5326)}])},5326:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return S}});var t=s(2322),i=s(2784),a=s(7319),l=s(3635),r=s(1654),c=s(8795),o=s(3411),d=s(212),u=s(2005),h=s(8343),x=s(8551),f=s(605),j=s(9649),w=s(9097),m=s.n(w),Z=s(1286),v=s(3781),p=s(1344),g=s(1074),N=s(3387),C=e=>{let{data:n,error:s,mutate:t}=(0,Z.ZP)("/wifi-info",g.wl,{refreshInterval:N.Z.NETWORK_TIMEOUT,refreshWhenHidden:!1,refreshWhenOffline:!0,revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0,...e});return{data:n,mutate:t,isLoading:!s&&!n,isError:s}},E=s(3022);let _="w-full h-full flex gap-2";var S=()=>{let{data:e,mutate:n,isError:s}=C(),{data:w}=(0,Z.ZP)("/saved-networks",g.M7),S=(0,i.useRef)(null),b=(0,i.useRef)(null),[k,F]=(0,i.useState)(""),[O,P]=(0,i.useState)([]),[y,I]=(0,i.useState)(""),[T,W]=(0,i.useState)(!0),[z,R]=(0,i.useState)(!0),[H,D]=(0,i.useState)(!1),M=async()=>{R(!0);let e=await (0,g.Sj)();console.log(e),P(e),R(!1)},B=()=>{!y&&(null==e?void 0:e.ssid)&&(null==w?void 0:w[e.ssid])&&I(w[e.ssid])},G=async()=>{k&&(D(!0),await (0,E.Z)("WiFi Connect ".concat(k,":").concat(y)),await (0,g.Cz)(k,y).then(e=>(0,E.Z)("Connect WiFi: ".concat(e))).catch(async e=>{await (0,E.Z)("WiFi Error: ".concat(e))}),setTimeout(()=>{(0,g.GI)().then(async()=>{await (0,g.Hu)(k,y),console.log("Connected, saved network".concat(k,":").concat(y))}).finally(()=>{n(),D(!1)})},N.Z.NETWORK_TIMEOUT))};return(0,i.useEffect)(()=>{M()},[]),(0,i.useEffect)(()=>{!k&&(null==e?void 0:e.ssid)?F(e.ssid):!k&&O&&O[0]&&F(O[0])},[e,O]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"block text-center",children:[!e&&!s&&(0,t.jsx)("p",{children:"Getting WiFi information..."})||s?(0,t.jsx)("p",{children:"Enter your WiFi name (SSID) and password to connect."}):(0,t.jsxs)("h3",{children:[null==e?void 0:e.ssid," ",null==e?void 0:e.quality," ",(0,t.jsx)(r.Z,{})]}),(0,t.jsxs)(c.ZP,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[(0,t.jsx)(c.ZP,{item:!0,xs:9,children:O&&(0,t.jsx)(o.Z,{autoComplete:!0,autoHighlight:!0,clearOnEscape:!0,freeSolo:!0,openOnFocus:!0,ref:S,disabled:z||H,options:O,sx:{width:"100%"},renderInput:e=>(0,t.jsx)(d.Z,{...e,label:"Network"}),inputValue:k,onChange:(e,n)=>{n&&(F(n),B())},onBlur:B,onInputChange:(e,n)=>{F(n)}})}),(0,t.jsx)(c.ZP,{item:!0,xs:3,children:(0,t.jsxs)(v.z,{onClick:M,className:"text-md flex h-full w-full gap-2",children:[z?(0,t.jsx)(u.Z,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(h.Z,{})," ","Refresh"]})}),(0,t.jsx)(c.ZP,{item:!0,xs:9,children:(0,t.jsx)(d.Z,{ref:b,label:"Password",variant:"outlined",value:y,sx:{width:"100%"},type:T?"password":"text",onChange:e=>{var n;I(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)}})}),(0,t.jsx)(c.ZP,{item:!0,xs:3,children:(0,t.jsx)(v.z,{onClick:()=>W(!T),className:"text-md flex h-full w-full gap-2",children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{})," Show"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.Z,{})," Hide"]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-3",children:[(0,t.jsx)(v.z,{children:(0,t.jsxs)(m(),{href:"/dashboard",children:[(0,t.jsx)(j.Z,{})," Back"]})}),(0,t.jsxs)(v.z,{onClick:G,className:(0,p.cn)(_,"text-xl"),children:[z||H?(0,t.jsx)(u.Z,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(a.Z,{fontSize:"inherit"}),"Connect"]}),(0,t.jsx)(v.z,{disabled:!(null==e?void 0:e.ssid),className:(0,p.cn)(_,"text-xl"),children:(null==e?void 0:e.ssid)?(0,t.jsxs)(m(),{href:"/dashboard",children:["Dashboard ",(0,t.jsx)(l.Z,{})]}):(0,t.jsxs)(t.Fragment,{children:["Dashboard ",(0,t.jsx)(l.Z,{})]})})]})]})]})})}}},function(e){e.O(0,[97,339,351,520,888,774,179],function(){return e(e.s=8836)}),_N_E=e.O()}]);